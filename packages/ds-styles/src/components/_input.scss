@use "../tokens" as tokens;

.#{tokens.$prefix}-input {
  // Reset
  appearance: none;
  margin: 0;
  padding: 0;

  // Layout
  display: block;

  // Box Model
  width: 100%;

  // Typography
  font-family: tokens.$font-family-default;
  font-size: tokens.$font-size-14;
  line-height: tokens.$line-height-normal;
  color: tokens.$text;

  // Visual
  background-color: var(--wg-input-bg, #{tokens.$background});
  border: 1px solid var(--wg-input-border, #{tokens.$border});
  border-radius: tokens.$radius-8;

  // Misc
  transition:
    background-color tokens.$transition-fast,
    border-color tokens.$transition-fast,
    box-shadow tokens.$transition-fast;

  &::placeholder {
    color: tokens.$text-subtle;
  }

  // ===================
  // Variants
  // ===================

  // Outline variant (default)
  &[data-variant="outline"] {
    --wg-input-bg: #{tokens.$background};
    --wg-input-border: #{tokens.$border};

    &:hover:not(:disabled) {
      --wg-input-border: #{tokens.$border-hover};
    }

    &:focus,
    &:focus-visible {
      outline: none;
      --wg-input-border: #{tokens.$primary};
      box-shadow: 0 0 0 2px #{tokens.$primary-alpha-20};
    }

    &[data-state="error"] {
      --wg-input-border: #{tokens.$danger};

      &:focus,
      &:focus-visible {
        box-shadow: 0 0 0 2px #{tokens.$danger-alpha-20};
      }
    }

    &[data-state="success"] {
      --wg-input-border: #{tokens.$success};

      &:focus,
      &:focus-visible {
        box-shadow: 0 0 0 2px #{tokens.$success-alpha-20};
      }
    }
  }

  // Filled variant
  &[data-variant="filled"] {
    --wg-input-bg: #{tokens.$background-subtle};
    --wg-input-border: transparent;

    &:hover:not(:disabled) {
      --wg-input-bg: #{tokens.$background-subtle-darken-3};
    }

    &:focus,
    &:focus-visible {
      outline: none;
      --wg-input-border: #{tokens.$primary};
      --wg-input-bg: #{tokens.$background};
      box-shadow: 0 0 0 2px #{tokens.$primary-alpha-20};
    }

    &[data-state="error"] {
      --wg-input-border: #{tokens.$danger};

      &:focus,
      &:focus-visible {
        box-shadow: 0 0 0 2px #{tokens.$danger-alpha-20};
      }
    }

    &[data-state="success"] {
      --wg-input-border: #{tokens.$success};

      &:focus,
      &:focus-visible {
        box-shadow: 0 0 0 2px #{tokens.$success-alpha-20};
      }
    }
  }

  // Underline variant
  &[data-variant="underline"] {
    --wg-input-bg: transparent;
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--wg-input-border, #{tokens.$border});
    border-radius: 0;
    padding-bottom: tokens.$spacing-2;

    &:hover:not(:disabled) {
      --wg-input-border: #{tokens.$border-hover};
    }

    &:focus,
    &:focus-visible {
      outline: none;
      --wg-input-border: #{tokens.$primary};
      box-shadow: 0 1px 0 0 var(--wg-input-border, #{tokens.$primary});
    }

    &[data-state="error"] {
      --wg-input-border: #{tokens.$danger};

      &:focus,
      &:focus-visible {
        box-shadow: 0 1px 0 0 var(--wg-input-border, #{tokens.$danger});
      }
    }

    &[data-state="success"] {
      --wg-input-border: #{tokens.$success};

      &:focus,
      &:focus-visible {
        box-shadow: 0 1px 0 0 var(--wg-input-border, #{tokens.$success});
      }
    }
  }

  // ===================
  // Sizes
  // ===================
  &[data-size="sm"] {
    height: 32px;
    padding: tokens.$spacing-1 tokens.$spacing-3;
    font-size: tokens.$font-size-13;
  }

  &[data-size="md"] {
    height: 40px;
    padding: tokens.$spacing-2 tokens.$spacing-4;
    font-size: tokens.$font-size-14;
  }

  &[data-size="lg"] {
    height: 48px;
    padding: tokens.$spacing-3 tokens.$spacing-4;
    font-size: tokens.$font-size-16;
  }

  // ===================
  // States
  // ===================

  // Disabled state
  &:disabled,
  &[data-state="disabled"] {
    cursor: not-allowed;
    opacity: 0.5;
    background-color: tokens.$background-muted;
  }

  // Error state
  &[data-state="error"] {
    --wg-input-border: #{tokens.$danger};

    &::placeholder {
      color: #{tokens.$danger-lighten-20};
    }
  }

  // Success state
  &[data-state="success"] {
    --wg-input-border: #{tokens.$success};

    &::placeholder {
      color: #{tokens.$success-lighten-20};
    }
  }
}
