@use "../tokens" as tokens;

// ===================
// Checkbox Root (label wrapper)
// ===================

.#{tokens.$prefix}-checkbox__root {
  // Layout
  display: inline-flex;
  align-items: center;
  gap: tokens.$spacing-2;

  // Misc
  cursor: pointer;
  user-select: none;

  &[data-disabled] {
    cursor: not-allowed;
    opacity: 0.5;
  }

  // Hover effect on indicator
  &:hover:not([data-disabled]) {
    .#{tokens.$prefix}-checkbox__indicator[data-state="unchecked"] {
      border-color: tokens.$border-hover;
    }
  }
}

// ===================
// Checkbox Indicator (visual box)
// ===================

.#{tokens.$prefix}-checkbox__indicator {
  // Layout
  display: inline-flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: center;

  // Visual
  background-color: tokens.$background;
  border: 1px solid tokens.$border;
  border-radius: tokens.$radius-4;

  // Misc
  transition:
    background-color tokens.$transition-fast,
    border-color tokens.$transition-fast,
    box-shadow tokens.$transition-fast;

  // ===================
  // Sizes
  // ===================
  &[data-size="sm"] {
    width: 16px;
    height: 16px;

    &::after {
      width: 8px;
      height: 8px;
    }
  }

  &[data-size="md"] {
    width: 20px;
    height: 20px;

    &::after {
      width: 10px;
      height: 10px;
    }
  }

  &[data-size="lg"] {
    width: 24px;
    height: 24px;

    &::after {
      width: 12px;
      height: 12px;
    }
  }

  // ===================
  // States
  // ===================

  // Checked state
  &[data-state="checked"] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;

    // Checkmark icon (CSS)
    &::after {
      content: "";
      display: block;
      border: solid tokens.$text-inverse;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg) translate(-1px, -1px);
      width: 5px;
      height: 9px;
    }

    &[data-size="sm"]::after {
      width: 4px;
      height: 7px;
      border-width: 0 1.5px 1.5px 0;
    }

    &[data-size="lg"]::after {
      width: 6px;
      height: 11px;
      border-width: 0 2.5px 2.5px 0;
    }
  }

  // Indeterminate state
  &[data-state="indeterminate"] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;

    // Minus icon (CSS)
    &::after {
      content: "";
      display: block;
      background-color: tokens.$text-inverse;
      border-radius: 1px;
      height: 2px;
    }

    &[data-size="sm"]::after {
      width: 8px;
    }

    &[data-size="md"]::after {
      width: 10px;
    }

    &[data-size="lg"]::after {
      width: 12px;
    }
  }

  // Disabled state
  &[data-state="disabled"] {
    background-color: tokens.$background-muted;
    border-color: tokens.$border;
  }

  // Focus ring (when parent is focused)
  .#{tokens.$prefix}-checkbox__root:focus-within & {
    outline: none;
    box-shadow: 0 0 0 2px #{tokens.$primary-alpha-20};
  }
}

// ===================
// Checkbox Label
// ===================

.#{tokens.$prefix}-checkbox__label {
  // Box Model
  flex: 1;
  min-width: 0;

  // Typography
  font-size: tokens.$font-size-14;
  line-height: tokens.$line-height-normal;
  color: tokens.$text;
  overflow-wrap: break-word;

  &[data-disabled] {
    color: tokens.$text-muted;
  }
}

// ===================
// Legacy .checkbox class (backwards compatibility)
// ===================

.#{tokens.$prefix}-checkbox {
  // Layout
  display: inline-flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: center;

  // Visual
  background-color: tokens.$background;
  border: 1px solid tokens.$border;
  border-radius: tokens.$radius-4;

  // Misc
  transition:
    background-color tokens.$transition-fast,
    border-color tokens.$transition-fast;
  cursor: pointer;

  &[data-size="sm"] {
    width: 16px;
    height: 16px;
  }

  &[data-size="md"] {
    width: 20px;
    height: 20px;
  }

  &[data-size="lg"] {
    width: 24px;
    height: 24px;
  }

  &[data-state="checked"] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;
  }

  &[data-state="indeterminate"] {
    background-color: tokens.$primary;
    border-color: tokens.$primary;
  }

  &[data-state="disabled"] {
    cursor: not-allowed;
    opacity: 0.5;
    background-color: tokens.$background-muted;
  }
}
