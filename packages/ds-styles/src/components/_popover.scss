@use '../tokens' as tokens;

.popover {
  position: absolute;
  z-index: 1000;
  background-color: var(--wg-popover-bg, #{tokens.$background});
  border: 1px solid var(--wg-popover-border, #{tokens.$border});
  border-radius: tokens.$radius-8;
  box-shadow: tokens.$shadow-lg;
  font-family: tokens.$font-family-default;
  color: var(--wg-popover-color, #{tokens.$text});

  // Sizes
  &[data-size='sm'] {
    padding: tokens.$spacing-2;
    font-size: tokens.$font-size-12;
    min-width: 120px;
    max-width: 240px;
  }

  &[data-size='md'] {
    padding: tokens.$spacing-3;
    font-size: tokens.$font-size-14;
    min-width: 180px;
    max-width: 320px;
  }

  &[data-size='lg'] {
    padding: tokens.$spacing-4;
    font-size: tokens.$font-size-16;
    min-width: 240px;
    max-width: 480px;
  }

  // Tooltip variant
  &[data-variant='tooltip'] {
    background-color: var(--wg-popover-bg, #{tokens.$text});
    color: var(--wg-popover-color, #{tokens.$text-inverse});
    border: none;
    border-radius: tokens.$radius-6;
    padding: tokens.$spacing-1 tokens.$spacing-2;
    font-size: tokens.$font-size-12;
    box-shadow: tokens.$shadow-md;
  }

  // Position-based margin for spacing from trigger
  &[data-position='top'] { margin-bottom: tokens.$spacing-2; }
  &[data-position='bottom'] { margin-top: tokens.$spacing-2; }
  &[data-position='left'] { margin-right: tokens.$spacing-2; }
  &[data-position='right'] { margin-left: tokens.$spacing-2; }
}

.popover-arrow {
  position: absolute;
  width: 8px;
  height: 8px;
  background-color: inherit;
  border: inherit;
  transform: rotate(45deg);

  // Position arrows
  .popover[data-position='top'] > & {
    bottom: -5px;
    border-top: none;
    border-left: none;
  }

  .popover[data-position='bottom'] > & {
    top: -5px;
    border-bottom: none;
    border-right: none;
  }

  .popover[data-position='left'] > & {
    right: -5px;
    border-bottom: none;
    border-left: none;
  }

  .popover[data-position='right'] > & {
    left: -5px;
    border-top: none;
    border-right: none;
  }

  // Tooltip arrow inherits dark bg
  .popover[data-variant='tooltip'] > & {
    border: none;
  }
}
